document.addEventListener("DOMContentLoaded",()=>{if("false"===localStorage.getItem("show_user_info")||!window.PanelUser||0===Object.keys(window.PanelUser).length)return;let e=window.PanelUser,s=new Date(e.created_at).toLocaleDateString("en-US",{day:"numeric",month:"long",year:"numeric"}),t=new Date(e.updated_at).toLocaleString("en-US",{day:"numeric",month:"long",year:"numeric",hour:"numeric",minute:"2-digit"});Swal.fire({title:'<i class="fa fa-user-circle fa-lg" style="color:#4fc3f7;"></i> Your Account Information',width:750,icon:null,showCloseButton:!0,showConfirmButton:!0,confirmButtonText:"OK",allowOutsideClick:!1,allowEscapeKey:!1,background:"#1e1e1e",color:"#e0e0e0",customClass:{popup:"swal-dark-mode",title:"swal-title-dark",htmlContainer:"swal-html-dark",confirmButton:"swal-button-dark",actions:"swal-actions-custom"},html:`
            <div style="text-align:left;font-size:15px;max-height:60vh;overflow-y:auto;padding-right:8px;">
                <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px 24px;margin-bottom:16px;">
                    <div><i class="fa fa-user" style="color:#4fc3f7;width:20px;"></i> <strong>Username</strong><br>${e.username}</div>
                    <div><i class="fa fa-envelope" style="color:#4fc3f7;width:20px;"></i> <strong>Email</strong><br>${e.email}</div>
                    <div><i class="fa fa-id-badge" style="color:#4fc3f7;width:20px;"></i> <strong>Full Name</strong><br>${e.name_first} ${e.name_last}</div>
                    <div><i class="fa fa-fingerprint" style="color:#4fc3f7;width:20px;"></i> <strong>UUID</strong><br><code style="font-size:13px;background:#2d2d2d;padding:2px 6px;border-radius:4px;">${e.uuid}</code></div>
                    <div><i class="fa fa-globe" style="color:#4fc3f7;width:20px;"></i> <strong>Language</strong><br>${e.language.toUpperCase()}</div>
                    <div><i class="fa fa-crown" style="color:#ffd700;width:20px;"></i> <strong>Root Admin</strong><br>${e.root_admin?'<span style="color:#4caf50;">Yes</span>':'<span style="color:#e57373;">No</span>'}</div>
                    <div><i class="fa fa-shield-alt" style="color:#4fc3f7;width:20px;"></i> <strong>2FA (TOTP)</strong><br>${e.use_totp?'<span style="color:#4caf50;">Enabled</span>':'<span style="color:#e57373;">Disabled</span>'}</div>
                    <div><i class="fa fa-image" style="color:#4fc3f7;width:20px;"></i> <strong>Gravatar</strong><br>${e.gravatar?'<span style="color:#4caf50;">Enabled</span>':'<span style="color:#e57373;">Disabled</span>'}</div>
                    <div><i class="fa fa-network-wired" style="color:#4fc3f7;width:20px;"></i> <strong>IP Address</strong><br>${e.ip||"<em>Not set</em>"}</div>
                    <div><i class="fa fa-gift" style="color:#4fc3f7;width:20px;"></i> <strong>Referral Code</strong><br>${e.referral_code||"<em>None</em>"}</div>
                    <div><i class="fab fa-discord" style="color:#5865F2;width:20px;"></i> <strong>Discord ID</strong><br>${e.discord_id||"<em>Not linked</em>"}</div>
                    <div><i class="fa fa-check-circle" style="color:#4fc3f7;width:20px;"></i> <strong>Status</strong><br>${e.approved&&e.verified?'<span style="color:#4caf50;">Approved & Verified</span>':'<span style="color:#e57373;">Pending</span>'}</div>
                </div>

                <hr style="margin:20px 0;border-color:#444;">

                <div style="margin-bottom:16px;">
                    <i class="fa fa-wallet" style="color:#ffd700;"></i> <strong>Store Balance:</strong> ${e.store_balance.toLocaleString("en-US")} credits
                </div>

                <div>
                    <i class="fa fa-server" style="color:#4fc3f7;"></i> <strong>Resource Limits</strong>
                    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px;margin-top:12px;">
                        <div><i class="fa fa-microchip" style="color:#81c784;"></i> CPU: <strong>${e.store_cpu} cores</strong></div>
                        <div><i class="fa fa-memory" style="color:#81c784;"></i> Memory: <strong>${e.store_memory} MB</strong></div>
                        <div><i class="fa fa-hdd" style="color:#81c784;"></i> Disk: <strong>${e.store_disk} MB</strong></div>
                        <div><i class="fa fa-plug" style="color:#81c784;"></i> Server Slots: <strong>${e.store_slots}</strong></div>
                        <div><i class="fa fa-network-wired" style="color:#81c784;"></i> Extra Ports: <strong>${e.store_ports}</strong></div>
                        <div><i class="fa fa-copy" style="color:#81c784;"></i> Backups: <strong>${e.store_backups}</strong></div>
                        <div><i class="fa fa-database" style="color:#81c784;"></i> Databases: <strong>${e.store_databases}</strong></div>
                    </div>
                </div>

                <hr style="margin:20px 0;border-color:#444;">

                <small style="display:block;margin-top:8px;">
                    <i class="fa fa-calendar-plus" style="color:#999;"></i> Account created: ${s}<br>
                    <i class="fa fa-clock" style="color:#999;"></i> Last updated: ${t}
                </small>
            </div>
        `,preConfirm(){let e=document.getElementById("dontShowAgain");e&&e.checked?localStorage.setItem("show_user_info","false"):localStorage.setItem("show_user_info","true")},didOpen(){let e=document.querySelector(".swal2-actions");e.insertAdjacentHTML("beforebegin",`
                <div style="margin: 20px 0 10px 0; text-align: left; padding-left: 30px;">
                    <label style="cursor:pointer;display:flex;align-items:center;font-size:14px;color:#bbb;">
                        <input type="checkbox" id="dontShowAgain" style="margin-right:10px;width:18px;height:18px;">
                        Don't show this message again
                    </label>
                </div>
            `)}})});
